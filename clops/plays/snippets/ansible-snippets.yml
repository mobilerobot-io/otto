---

tasks:

  ## Wait for a server to be ready on a certain address and port
  - name: Wait for a webserver to start
    local_action:
      module: wait_for
      host: "{{ inventory_hostname }}"
      port: "{{ webserver_port }}"
      delay: 10
      timeout: 300
      state: started

  - block:
      - name: A block of scripts to do something not critical
        script:  i-am-alive
    rescue:
      - name: Oh no, there was an error running i-am-alive
        debug: msg="There was an error running i-am-alive"

    always:
      - name: This always runs, no matter what
        debug: msg="This will always execute"

    when: ansible_os_family  == 'Debian'
    
